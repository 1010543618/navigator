<!DOCTYPE html>
<html lang="en" xml:lang="en" xmlns= "http://www.w3.org/1999/xhtml">
  <head>
    <title>PaleoDB Navigator</title>

    <meta charset="utf-8"/>
    <meta http-equiv="Content-Language" content="en" />
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, width=device-width">
    <meta name="author" content="John J Czaplewski"/>

    <meta property="og:image" content="http://paleobiodb.org/navigator/build/img/wegener_med.png"/>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="apple-touch-icon" sizes="120x120" href="build/img/touch-icon-iphone-retina.png">
    <link rel="apple-touch-icon" sizes="152x152" href="build/img/touch-icon-ipad-retina.png">

    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7/leaflet.css" />
    <link href="http://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css"/>
    <link href="http://fonts.googleapis.com/css?family=Raleway:200" rel="stylesheet" type="text/css">
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet" type="text/css"/>
    <link href="build/css/navigator.min.css" rel="stylesheet" type="text/css"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-46265774-1', 'paleobiodb.org');
      ga('send', 'pageview');
    </script>

  </head>

  <body>
    <div class="container">
      <div class="navbar navbar-default navbar-static-top">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/navigator"><t class="brand-small">PBDB</t> Navigator <t class="brand-small">Alpha 1.0</t></a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="navbar-text"><a data-toggle="modal" href="#aboutModal" class="navbar-link">About</a></li>
            <li class="navbar-text"><a data-toggle="modal" href="#helpModal" class="navbar-link">Help</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
             <div>
              
              <div class="universalSearch col-sm-4">
                <form class="form-search universalSearchForm">
                  <div class="input-group">
                    <input type="text" class="form-control" placeholder="Time, taxa, authorizer" id="universalAutocompleteInput">
                    <span class="input-group-btn">
                      <button type="submit" class="btn btn-primary" id="universalSearchButton"><i class="icon icon-search"></i></button>
                    </span>
                  </div>
                </form>
              </div>
              
            </div>
          </ul>
        </div>
      </div> <!-- end navbar -->
     
      <div class="row" id="graphicRow">

        <div class="col-sm-3" id="taxaBrowser">
          <div class="browser">
            <form id="taxaSearch">
              <input type="text" class="form-control" id="taxonInput" autocorrect="off" placeholder="Enter a taxonomic name:"/>
            </form>

            <div name="focal_taxon_box">
              <table class="table table-hover">
                <tbody id="focalTaxonParents"></tbody>
              </table>
            </div>

            <div class="focalTaxon" name="focal_taxon_box">
              <table class="table table-hover">
                <tr class="active">
                  <td>
                    <a class="taxonTitle"></a><br>
                    <p class="taxonAttr"></p>
                  </td>
                </tr>
              </table>
            </div>

            <div class="taxonChildren">
              <table class="table table-hover table-condensed">
                <tbody id="focal_taxon_children"></tbody>
              </table>
            </div>
          </div>
          <a class="taxaBrowserToggle" href="#" style="font-size:0.8em;color:#777;"><i class="icon-double-angle-left" style="margin-right:5px;"></i>Collapse taxa browser</a>
        </div>

      	<div class="col-sm-12" id="graphics">
          <img src="build/img/loading.gif" id="loading"/>
          <div class="filters">
            <p><strong id="filterTitle">Filters</strong></p>
            <div id="selectedInterval" class="filter"></div>
            <div id="personFilter" class="filter"></div>
            <div id="taxon" class="filter"></div>
          </div>
          <div id="mapControlCover">
            <div id="controlCover1"></div>
            <div id="controlCover2"></div>
          </div>
          <div id="mapControls">
            <div class="customControl buttons leaflet-control">
              <div class="zoom-in mapCtrl" title="Zoom in"><i class="icon-plus ctrlButton"></i></div>
              <div class="zoom-out mapCtrl" title="Zoom out"><i class="icon-minus ctrlButton"></i></div>
              <div class="rotate mapCtrl" title="Toggle paleogeography"><div id="rotateIcon"></div></div>
              <div class="taxa mapCtrl" title="Toggle taxa browser"><i class="icon-bug icon-2x ctrlButton"></i></div>
              <div class="save mapCtrl" title="Save map data"><a data-toggle="modal" href="#saveBox"><i class="icon-save icon-2x ctrlButton"></i></a></div>
              
            </div>

            <div class="customControl timeToggler leaflet-control">
              <form action="">
                <input id="viewByTimeBox" type="checkbox" value="1"/>Filter by time
              </form>
            </div>
            <div class="customControl reconstructToggler leaflet-control">
              <form action="">
                <input id="reconstructBox" type="checkbox" value="1"/>Rotate view by interval
              </form>
            </div>
            <div class="customControl taxaToggler leaflet-control">
              <form id="taxaForm">
                <input type="text" id="taxaInput" class="form-control" placeholder="Enter a taxon" size="22"/>
              </form>
              <a href="#" class="taxaBrowserToggle" style="color:#777;">Expand taxa browser<i class="icon-double-angle-right" style="margin-left:5px;"></i></a>
            </div>
            <div class="customControl userToggler leaflet-control">
              <form>
                <input type="text" id="personInput" class="form-control" placeholder="Enter an authorizer" size="22"/>
              </form>
            </div>
            <div id="infoContainer">
              <div class="info leaflet-control"></div>
            </div>
          </div>

          <div id="mapContainer">
            <div id="svgMap"></div>
            <div id="map"></div>
            <div id="reconstructMap">
              <div id="reconstructMapRefContainerContainer">
                <div id="reconstructMapRefContainer">
                  <div id="reconstructMapReference">
                    <a data-toggle="modal" href="#gPlatesBox">
                      <img id="gplatesLogo" src="build/img/gplates_icon.jpg">
                    </a>
                    <div id="reconstructMapStats">
                      <h5 id="interval"></h5>
                      <p id="age"></p>
                    </div>
                    <br>
                    <a id="mapSwitch" href="#"><i class="icon-circle-arrow-left"></i> Back to main map</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div id="time"></div>
        </div> <!-- End col-12 -->
      </div> <!-- End row -->
    </div>

    <div class="modal fade" id="saveBox" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3 class="modal-title">Download Current View</h3>
            <p class="text-muted" id="downloadCount"></p>
          </div>
          <div class="modal-body">
            <div class="row">
              <div class="col-sm-12">
                <h4>Filters:</h4>
                <ul id="filterList"></ul>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-12">
                <h4>Format:</h4>
                <div class="radio">
                  <label>
                    <input type="radio" name="format" id="csv" checked>
                    Comma-separated (CSV)
                  </label>
                </div>
                <div class="radio">
                  <label>
                    <input type="radio" name="format" id="tsv">
                    Tab-separated (TSV)
                  </label>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-success" onclick="return navMap.downloadView()">Download</button>
            <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
          </div>
        </div>
      </div>
    </div><!-- end download modal -->

    <div class="modal fade" id="collectionBox" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="collectionName"></h4>
          </div>
          <div class="modal-body" id="collectionModalBody"></div>
        </div>
      </div>
    </div><!-- end collectionBox modal -->

     <div class="modal fade" id="gPlatesBox" tabindex="-1" role="dialog" aria-labelledby="GPlatesInfo" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title">About GPlates</h4>
            <p class="text-muted"><a href="http://www.gplates.org">www.gplates.org</a></p>
          </div>
          <div class="modal-body">
            <h4>Current rotation:</h4>
            <table class="table">
              <tr>
                <td style="border-top:0;"><strong>Rotation interval</strong></td>
                <td id="rotationInterval" style="border-top:0;"></td>
              </tr>
              <tr>
                <td><strong>Rotation year</strong></td>
                <td id="rotationYear"></td>
              </tr>
              <tr>
                <td><strong>Reference</strong></td>
                <td id="rotationReference"></td>
              </tr>
            </table>

          </div>
        </div>
      </div>
    </div><!-- end gPlatesBox modal -->


    <div class="modal fade" id="collectionModal" tabindex="-1" role="dialog" aria-labelledby="BinInfo" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="binID"></h4>
          </div>
          <div class="modal-body">
            <h4>Collections</h4>
            <div class="panel-group" id="accordion"></div>
          </div>
        </div>
      </div>
    </div><!-- end collectionModal -->

    <div class="modal fade" id="binModal" tabindex="-1" role="dialog" aria-labelledby="BinInfo" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title" id="binNumber"></h4>
          </div>
          <div class="modal-body">
            <h4 id="binModalTitle"></h4>
            <table class="table table-condensed">
              <tbody class="binContent"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div><!-- end binModal -->

    <div class="modal fade" id="subtaxaModal" tabindex="-1" role="dialog" aria-labelledby="Subtaxa" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header" id="subtaxaModalHeader">
            <input class="form-control" type="text" onkeyup="taxaBrowser.filter(this)" placeholder="Type to filter..." id="taxaFilterInput"/>
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          </div>
          <div class="modal-body">
            <p class="subtaxaModalLegend">Taxon name (number of occurrences in the database)</p>
            <div id="subTaxaModalList">
              <ol class="list-unstyled" id="subtaxa"></ol>
            </div>
          </div>
        </div>
      </div>
    </div><!-- end subtaxaModal -->

    <div class="modal fade" id="aboutModal" tabindex="-1" role="dialog" aria-labelledby="About" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title">About PaleoDB Navigator</h4>
          </div>
          <div class="modal-body">
            <h4>The Application</h4>
            <p>Built on the <a href="http://paleobiodb.org/data1.1/">PaleoDB API</a>, PaleoDB Navigator allows users to explore the Paleobiology Database through space, time, and taxonomy. Paleobiology Database data is used under a <a href="http://creativecommons.org/licenses/by/4.0/">CC BY 4.0 International License </a>. In addition to the Paleobiology Database, it utilizes data from <a href="http://www.gplates.org">GPlates</a> under a GNU <a href="http://www.gnu.org/licenses/old-licenses/gpl-2.0.html">General Public License (GPL), version 2</a> license for plate and collection rotations, and <a href="http://phylopic.org/">Phylopic.org</a> for taxonomic images under either a Public Domain or Creative Commons license. All code unique to the PaleoDB Navigator interface uses a <a href="http://creativecommons.org/publicdomain/zero/1.0/">CC0 1.0 Universal</a> Public Domain Dedication, and can be found on <a href="https://github.com/paleobiodb/navigator" target="_blank">Github</a>.</p><br>
            <h4>Project Funding</h4>
            <p>Current development of the PaleoDB database, API, website, and example applications is being carried out in the <a href="http://geoscience.wisc.edu/geoscience/">Department of Geoscience</a> at the <a href="http://wisc.edu">University of Wisconsin-Madison</a>. It is supported by the UW-Madison Deptartment of Geoscience and the U.S. National Science Foundation EAR Geoinformatics grant 0949416.</p><br>
            <h4>Project Team</h4>
            <p>
              <a href="http://strata.geology.wisc.edu">Shanan Peters</a> - Principal Investigator<br>
              <a href="http://strata.geology.wisc.edu/Home/Team.html">Michael McClennen</a> - Chief Informaticist<br>
              <a href="http://twitter.com/JJCzaplewski">John Czaplewski</a> - Front end designer, developer, and cartographer
            </p><br>
            <h4>Issues</h4>
            <p>For general questions about the Paleobiology Database or PaleoDB Navigator, please email to <a href="mailto:admin@paleobiodb.org">admin@paleobiodb.org</a>. See something that doesn't look right? Please file a new issue or comment on an existing one on the <a href="https://github.com/paleobiodb/navigator/issues" target="_blank">issues page</a>.</p>
          </div>
        </div>
      </div>
    </div><!-- end aboutModal -->

    <div class="modal fade" id="helpModal" tabindex="-1" role="dialog" aria-labelledby="Help" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content" id="helpModalContent">
          <div class="modal-body">
            <div class="helpModalClose">
              <i class="icon icon-remove icon-2x"></i>
            </div>
            <div class="helpModalTitle">
              <h2>Welcome to PBDB Navigator Alpha!</h2>
            </div>
             <div class="row exampleRow" style="margin-bottom:15px;">
              <div class="col-sm-12" style="text-align:center;">
                <h3 style="font-family:'Raleway';">Get started with an example</h3>
              </div>
            </div>

            <div class="row exampleRow">
              <div class="col-sm-12">
                <div class="col-sm-4 examples">
                  <button type="button" class="btn btn-primary btn-lg" id="trilobita">
                    <img src="build/img/trilobita.png" alt="Trilobita"/>
                    <p>Cambrian Trilobites<br> Eastern China</p>
                  </button>
                </div>
                <div class="col-sm-4 examples">
                  <button type="button" class="btn btn-primary btn-lg" id="dinosauria">
                    <img src="build/img/dinosauria.png" alt="Dinosauria"/>
                    <p>Jurassic Dinosaurs<br> Western USA</p>
                  </button>
                </div>
                <div class="col-sm-4 examples">
                  <button type="button" class="btn btn-primary btn-lg" id="plantae">
                    <img src="build/img/plantae.png" alt="Plantae"/>
                    <p>Permian Plants<br> Paleogeography</p>
                  </button>
                </div>
              </div>
            </div>
            <div class="row exampleRow goToApp">
              <div class="col-sm-12 goToApp">
                <p>or</p>
                <button class="btn btn-primary" id="goToApp">Go to application</button>
              </div>
            </div>
            <div class="helpModalControls">
              <div class="helpModalControlLabel">
                <i class="icon icon-angle-left"></i><p>Zoom in</p>
              </div>
              <div class="helpModalControlLabel">
                <i class="icon icon-angle-left"></i><p>Zoom out</p>
              </div>
              <div class="helpModalControlLabel">
                <i class="icon icon-angle-left"></i><p>Paleo view</p>
              </div>
              <div class="helpModalControlLabel">
                <i class="icon icon-angle-left"></i><p>Taxa browser</p>
              </div>
              <div class="helpModalControlLabel">
                <i class="icon icon-angle-left"></i><p>Save data</p>
              </div>
            </div>
            <div class="helpModalTimescaleLabel click">
              <p>Click/tap a time interval to filter the map</p><i class="icon icon-angle-down"></i>
            </div>
            <div class="helpModalTimescaleLabel dblclick">
              <p>Double click/tap a time interval to zoom the time scale</p><i class="icon icon-angle-down"></i>
            </div>
          </div>
        </div>
      </div>
    </div><!-- end helpModal -->
    
    <script src="http://cdn.leafletjs.com/leaflet-0.7/leaflet.js"></script>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="http://d3js.org/topojson.v1.min.js"></script>
    <script src="http://d3js.org/d3.geo.projection.v0.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/hammer.js/1.0.5/jquery.hammer.min.js"></script>

    <script src="build/js/script.min.js"></script>
  </body>
</html>